<!DOCTYPE html>
<html lang="en" class="dark">
<head>
  <meta charset="UTF-8" />
  <title>Projections Hub</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = { darkMode: 'class' }
  </script>
</head>

<body class="bg-slate-950 text-slate-100">

<div class="aurora-bg" aria-hidden="true"></div>
<div class="aurora-noise" aria-hidden="true"></div>

<!-- Blur-only transition overlay (no color change, no ripple) -->
<div id="transitionOverlay" class="transition-overlay hidden" aria-hidden="true"></div>

<!-- Blur target -->
<div id="app" class="relative z-10">
  <div class="max-w-7xl mx-auto p-4 min-h-screen flex flex-col">

    <div class="flex flex-wrap gap-3 justify-between items-center mb-4">
      <div class="flex items-center gap-3">
        <div class="brand-badge">
          <span class="brand-dot"></span>
          <span class="font-bold tracking-wide">Projections Hub</span>
        </div>
        <h1 id="pageTitle" class="text-2xl md:text-3xl font-bold">Main Menu</h1>
      </div>

      <div class="flex gap-2 flex-wrap">
        <button id="homeBtn" class="btn btn-soft">Home</button>
      </div>
    </div>

    <div class="grid grid-cols-1 md:grid-cols-[260px,1fr] gap-4 flex-1">

      <!-- NAV SIDEBAR: hidden on home, shown on other pages -->
      <aside id="navAside" class="glass-card p-3 md:p-4 hidden">
        <div class="mb-3">
          <div class="text-xs uppercase tracking-widest opacity-70 mb-2">Navigation</div>
        </div>

        <div class="flex flex-col gap-2">
          <button data-lg="nhl" data-md="proj" class="nav-btn">
            <span class="nav-icon">üèí</span>
            <span class="flex-1 text-left"><div class="font-semibold">NHL Projections</div></span>
            <span class="nav-arrow">‚Üí</span>
          </button>

          <button data-lg="nhl" data-md="lineup" class="nav-btn">
            <span class="nav-icon">üìã</span>
            <span class="flex-1 text-left"><div class="font-semibold">NHL Draft</div></span>
            <span class="nav-arrow">‚Üí</span>
          </button>

          <button data-lg="nhl" data-md="team" class="nav-btn">
            <span class="nav-icon">üèÜ</span>
            <span class="flex-1 text-left"><div class="font-semibold">NHL Best Team</div></span>
            <span class="nav-arrow">‚Üí</span>
          </button>

          <button data-lg="nhl" data-md="best_lineups" class="nav-btn">
            <span class="nav-icon">üî•</span>
            <span class="flex-1 text-left"><div class="font-semibold">NHL Top 10 Lineups</div></span>
            <span class="nav-arrow">‚Üí</span>
          </button>
        </div>
      </aside>

      <main class="glass-card p-3 md:p-4 min-h-[420px]">

        <!-- FRONTEND ERROR BOX (so you see what‚Äôs wrong) -->
        <div id="errorBox" class="hidden mb-4 p-3 rounded-xl border border-red-400/30 bg-red-500/10">
          <div class="font-bold text-red-200">Frontend error</div>
          <div id="errorMsg" class="text-sm opacity-90 mt-1 whitespace-pre-wrap"></div>
        </div>

        <!-- MAIN MENU (2x2 centered, each ~ quarter screen) -->
        <div id="homeView" class="fade-in h-[calc(100vh-190px)] min-h-[520px] flex items-center justify-center">
          <div class="w-full max-w-5xl">
            <div class="text-center mb-5">
              <div class="text-xs uppercase tracking-[0.25em] opacity-70 mb-2">Main Menu</div>
              <div class="text-2xl md:text-3xl font-extrabold leading-tight">Choose a page</div>
              <div class="mt-2 text-sm opacity-80">Pick one of the four NHL tabs.</div>
            </div>

            <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
              <!-- Each button is tall so the 2x2 fills most of the screen -->
              <button data-lg="nhl" data-md="proj" class="nav-btn nav-main-tile">
                <span class="nav-icon">üèí</span>
                <span class="flex-1 text-left">
                  <div class="font-semibold text-lg">NHL Projections</div>
                  <div class="text-xs opacity-70 mt-1">View projections + search</div>
                </span>
                <span class="nav-arrow">‚Üí</span>
              </button>

              <button data-lg="nhl" data-md="lineup" class="nav-btn nav-main-tile">
                <span class="nav-icon">üìã</span>
                <span class="flex-1 text-left">
                  <div class="font-semibold text-lg">NHL Draft</div>
                  <div class="text-xs opacity-70 mt-1">Optimal lineup for today</div>
                </span>
                <span class="nav-arrow">‚Üí</span>
              </button>

              <button data-lg="nhl" data-md="team" class="nav-btn nav-main-tile">
                <span class="nav-icon">üèÜ</span>
                <span class="flex-1 text-left">
                  <div class="font-semibold text-lg">NHL Best Team</div>
                  <div class="text-xs opacity-70 mt-1">Top team stacks ranked</div>
                </span>
                <span class="nav-arrow">‚Üí</span>
              </button>

              <button data-lg="nhl" data-md="best_lineups" class="nav-btn nav-main-tile">
                <span class="nav-icon">üî•</span>
                <span class="flex-1 text-left">
                  <div class="font-semibold text-lg">NHL Top 10 Lineups</div>
                  <div class="text-xs opacity-70 mt-1">From NHL_BEST_LINEUPS</div>
                </span>
                <span class="nav-arrow">‚Üí</span>
              </button>
            </div>
          </div>
        </div>

        <div id="searchWrap" class="mb-4 hidden fade-in">
          <input id="playerSearch" placeholder="Search player"
            class="px-3 py-2 rounded border w-full max-w-sm bg-white/5 backdrop-blur-md border-white/10 focus:outline-none focus:ring-2 focus:ring-emerald-200/20">
        </div>

        <div id="loading" class="hidden text-center py-10 text-lg fade-in">
          <div class="spinner mx-auto mb-3"></div>
          Loading data...
        </div>

        <div id="projectionView" class="overflow-x-auto rounded-lg hidden fade-in"></div>

        <div id="lineupView" class="hidden mt-2 fade-in">
          <h2 class="text-2xl font-bold mb-2">Optimal Lineup</h2>
          <div class="table-wrap">
            <table class="w-full rounded-lg overflow-hidden">
              <thead class="bg-white/10">
                <tr>
                  <th class="p-2 text-left">Player</th>
                  <th class="p-2 text-right">Proj</th>
                  <th class="p-2 text-right">Boost</th>
                  <th class="p-2 text-right">Mult</th>
                  <th class="p-2 text-right">Score</th>
                </tr>
              </thead>
              <tbody id="lineupBody" class="bg-white/5"></tbody>
              <tfoot>
                <tr class="font-bold border-t border-white/10">
                  <td class="p-2">Total</td>
                  <td colspan="4" id="lineupTotal" class="p-2 text-right"></td>
                </tr>
              </tfoot>
            </table>
          </div>
        </div>

        <!-- TEAM VIEW -->
        <div id="teamView" class="hidden mt-2 fade-in">
          <div class="flex flex-wrap items-end justify-between gap-2 mb-3">
            <div>
              <h2 class="text-2xl font-bold">Top Team Stacks</h2>
            </div>
            <div class="text-xs opacity-70">Highest teams at the top</div>
          </div>
          <div id="teamRankList" class="space-y-3"></div>
        </div>

        <!-- TOP 10 LINEUPS VIEW -->
        <div id="bestLineupsView" class="hidden mt-2 fade-in">
          <div class="flex flex-wrap items-end justify-between gap-2 mb-3">
            <div>
              <h2 class="text-2xl font-bold">Top 10 Lineups</h2>
              <div class="text-xs opacity-70 mt-1">From <span class="font-semibold">NHL_BEST_LINEUPS</span></div>
            </div>
            <div class="text-xs opacity-70">Showing 10 lineups</div>
          </div>

          <div id="bestLineupsList" class="space-y-4"></div>
        </div>

      </main>
    </div>

  </div>
</div>

<script>
/* ================= CONFIG ================= */
const BASE_URL =
  "https://script.google.com/macros/s/AKfycbyFOaZsa1uC5KJj9eWDPdaZA2UxGkc9CoScwMcUxfjNXWdcHe29KxsYu485sVwYie_d/exec";

/* ================= DOM REFS (NO GLOBAL-ID RELYING) ================= */
const el = {
  pageTitle: document.getElementById("pageTitle"),
  homeBtn: document.getElementById("homeBtn"),
  navAside: document.getElementById("navAside"),

  errorBox: document.getElementById("errorBox"),
  errorMsg: document.getElementById("errorMsg"),

  homeView: document.getElementById("homeView"),
  searchWrap: document.getElementById("searchWrap"),
  playerSearch: document.getElementById("playerSearch"),
  loading: document.getElementById("loading"),

  projectionView: document.getElementById("projectionView"),
  lineupView: document.getElementById("lineupView"),
  lineupBody: document.getElementById("lineupBody"),
  lineupTotal: document.getElementById("lineupTotal"),

  teamView: document.getElementById("teamView"),
  teamRankList: document.getElementById("teamRankList"),

  bestLineupsView: document.getElementById("bestLineupsView"),
  bestLineupsList: document.getElementById("bestLineupsList"),
};

/* ================= STATE ================= */
let league = "nhl";
let mode = "home";
let allData = [];
let bestLineups = [];

let sortKey = null;
let sortDir = "desc";

/* ================= ERROR UI ================= */
function clearError() {
  el.errorBox.classList.add("hidden");
  el.errorMsg.textContent = "";
}
function showError(msg) {
  el.errorBox.classList.remove("hidden");
  el.errorMsg.textContent = msg;
}

/* ================= TRANSITION ================= */
function startTransition() {
  const o = document.getElementById("transitionOverlay");
  o.classList.remove("hidden");
  document.documentElement.classList.add("is-transitioning");
}
function endTransition() {
  const o = document.getElementById("transitionOverlay");
  o.classList.add("out");
  setTimeout(() => {
    o.classList.add("hidden");
    o.classList.remove("out");
    document.documentElement.classList.remove("is-transitioning");
  }, 240);
}

/* ================= VIEW HELPERS ================= */
function setSidebarVisible(isVisible) {
  el.navAside.classList.toggle("hidden", !isVisible);
}
function setViewsVisible({ home=false, proj=false, lineup=false, team=false, bestLineupsPage=false, search=false }) {
  el.homeView.classList.toggle("hidden", !home);
  el.projectionView.classList.toggle("hidden", !proj);
  el.lineupView.classList.toggle("hidden", !lineup);
  el.teamView.classList.toggle("hidden", !team);
  el.bestLineupsView.classList.toggle("hidden", !bestLineupsPage);
  el.searchWrap.classList.toggle("hidden", !search);
}

/* ================= SAFE PARSING ================= */
async function fetchJsonWithDebug(url) {
  const res = await fetch(url, { cache: "no-store" });
  const contentType = (res.headers.get("content-type") || "").toLowerCase();
  const text = await res.text();

  if (!res.ok) {
    throw new Error(`Fetch failed: ${res.status} ${res.statusText}\nURL: ${url}\n\nBody:\n${text.slice(0, 600)}`);
  }

  // Apps Script sometimes returns HTML even with 200
  if (!contentType.includes("application/json")) {
    // try parse anyway; if fails, show raw
    try {
      return JSON.parse(text);
    } catch {
      throw new Error(`Non-JSON response (content-type: ${contentType || "unknown"})\nURL: ${url}\n\nBody:\n${text.slice(0, 600)}`);
    }
  }

  try {
    return JSON.parse(text);
  } catch {
    throw new Error(`JSON parse error\nURL: ${url}\n\nBody:\n${text.slice(0, 600)}`);
  }
}

function unwrapToArray(x) {
  if (Array.isArray(x)) return x;
  if (x && Array.isArray(x.data)) return x.data;
  if (x && Array.isArray(x.rows)) return x.rows;
  if (x && Array.isArray(x.items)) return x.items;
  return []; // fallback
}

/* ================= NAV ================= */
async function goHome() {
  startTransition();
  clearError();

  league = "nhl";
  mode = "home";
  el.pageTitle.textContent = "Main Menu";

  setSidebarVisible(false);
  setViewsVisible({ home:true });

  el.loading.classList.add("hidden");
  endTransition();
}

async function loadLeague(lg, md) {
  // Force NHL only
  lg = "nhl";

  startTransition();
  clearError();

  league = lg;
  mode = md;

  sortKey = null;
  sortDir = "desc";

  setSidebarVisible(true);

  el.pageTitle.textContent =
    "NHL" + (
      md === "proj" ? " Projections" :
      md === "lineup" ? " Today‚Äôs Draft" :
      md === "team" ? " Best Team" :
      md === "best_lineups" ? " Top 10 Lineups" :
      ""
    );

  setViewsVisible({ home:false, proj:false, lineup:false, team:false, bestLineupsPage:false, search:false });

  const showProj = (md === "proj");
  const showLineup = (md === "lineup");
  const showTeam = (md === "team");
  const showBestLineups = (md === "best_lineups");

  setViewsVisible({
    proj: showProj,
    lineup: showLineup,
    team: showTeam,
    bestLineupsPage: showBestLineups,
    search: showProj
  });

  el.loading.classList.remove("hidden");

  try {
    if (md === "best_lineups") {
      const url = `${BASE_URL}?league=nhl&sheet=NHL_BEST_LINEUPS`;
      const json = await fetchJsonWithDebug(url);
      bestLineups = unwrapToArray(json);
    } else {
      const url = `${BASE_URL}?league=nhl`;
      const json = await fetchJsonWithDebug(url);
      allData = unwrapToArray(json);
    }

    if (md === "proj") renderTable();
    else if (md === "lineup") computeLineup();
    else if (md === "team") computeRankedTeamStacks();
    else if (md === "best_lineups") renderBestLineups();
  } catch (e) {
    console.error(e);
    showError(String(e.message || e));
  } finally {
    el.loading.classList.add("hidden");
    endTransition();
  }
}

/* ================= SORTING HELPERS ================= */
function safeNum(v) {
  if (v === null || v === undefined) return 0;

  // allow numbers directly
  if (typeof v === "number" && Number.isFinite(v)) return v;

  // parse numeric-ish strings robustly (commas, spaces, %)
  const s = String(v).trim()
    .replace(/,/g, "")        // 1,234.56 -> 1234.56
    .replace(/%/g, "")        // 12% -> 12
    .replace(/[^\d.+-eE]/g, ""); // strip any other junk

  const n = Number(s);
  return Number.isFinite(n) ? n : 0;
}

/* ===== Helpers used for BEST LINEUPS robustness ===== */
function normKey(k) {
  return String(k || "")
    .toLowerCase()
    .trim()
    .replace(/\s+/g, "_")
    .replace(/[^\w]/g, "");
}
function buildKeyMap(row) {
  const map = {};
  for (const k in row) map[normKey(k)] = row[k];
  return map;
}
function getVal(map, key, fallback = "") {
  const v = map[normKey(key)];
  return v === undefined || v === null ? fallback : v;
}
function slotObjFromMap(rowMap, i) {
  return {
    mult: safeNum(getVal(rowMap, `slot${i}_mult`, 0)),
    player: String(getVal(rowMap, `slot${i}_player`, "")).trim(),
    team: String(getVal(rowMap, `slot${i}_team`, "")).trim(),
    mu: safeNum(getVal(rowMap, `slot${i}_mu`, 0)),
    boost: safeNum(getVal(rowMap, `slot${i}_boost`, 0)),
  };
}

/* ================= TOP 10 LINEUPS ================= */
function renderBestLineups() {
  el.bestLineupsList.innerHTML = "";

  const rows = Array.isArray(bestLineups) ? bestLineups.slice() : [];
  const top10 = rows
    .slice()
    .sort((a, b) => safeNum(a.rank) - safeNum(b.rank))
    .slice(0, 10);

  if (!top10.length) {
    el.bestLineupsList.innerHTML = `
      <div class="p-4 rounded-xl border border-white/10 bg-white/5">
        <div class="font-semibold">No lineups found</div>
      </div>
    `;
    return;
  }

  top10.forEach(raw => {
    const m = buildKeyMap(raw);

    const rank = safeNum(getVal(m, "rank", 0));
    const objective = safeNum(getVal(m, "objective", 0));
    const expected = safeNum(getVal(m, "expected", 0));
    const sd = safeNum(getVal(m, "sd", 0));
    const synergy = safeNum(getVal(m, "synergy", 0));

    const slots = [1,2,3,4,5].map(i => slotObjFromMap(m, i));

    const playersInline = slots.map(s => `
      <span class="chip">
        <span class="chip-name">${s.player || "(missing)"}${s.team ? ` ‚Ä¢ ${s.team}` : ""}</span>
      </span>
    `).join("");

    const slotRows = slots.map((s, idx) => `
      <tr class="border-t border-white/10 hover-row">
        <td class="p-2 font-semibold">${idx + 1}</td>
        <td class="p-2">${s.player || ""}</td>
        <td class="p-2 text-center">${s.team || ""}</td>
        <td class="p-2 text-right">${s.mult.toFixed(1)}</td>
        <td class="p-2 text-right">${s.mu.toFixed(2)}</td>
        <td class="p-2 text-right text-emerald-200">${s.boost.toFixed(1)}</td>
      </tr>
    `).join("");

    el.bestLineupsList.insertAdjacentHTML("beforeend", `
      <div class="team-card hover-row">
        <div class="flex items-center justify-between gap-3 flex-wrap">
          <div class="flex items-center gap-3">
            <div class="rank-badge">üî• #${rank || ""}</div>
            <div class="text-lg font-bold tracking-wide">Lineup</div>
          </div>

          <div class="flex flex-wrap gap-3 text-right">
            <div>
              <div class="text-xs uppercase tracking-widest opacity-70">Objective</div>
              <div class="text-lg font-extrabold text-emerald-200">${objective.toFixed(2)}</div>
            </div>
            <div>
              <div class="text-xs uppercase tracking-widest opacity-70">Expected</div>
              <div class="text-lg font-extrabold">${expected.toFixed(2)}</div>
            </div>
            <div>
              <div class="text-xs uppercase tracking-widest opacity-70">SD</div>
              <div class="text-lg font-extrabold">${sd.toFixed(2)}</div>
            </div>
            <div>
              <div class="text-xs uppercase tracking-widest opacity-70">Synergy</div>
              <div class="text-lg font-extrabold">${synergy.toFixed(2)}</div>
            </div>
          </div>
        </div>

        <div class="chips mt-3">${playersInline}</div>

        <div class="table-wrap mt-4">
          <table class="w-full text-sm rounded-lg overflow-hidden">
            <thead class="bg-white/10">
              <tr>
                <th class="p-2 text-left">Slot</th>
                <th class="p-2 text-left">Player</th>
                <th class="p-2 text-center">Team</th>
                <th class="p-2 text-right">Mult</th>
                <th class="p-2 text-right">Mu</th>
                <th class="p-2 text-right">Boost</th>
              </tr>
            </thead>
            <tbody class="bg-white/5">
              ${slotRows}
            </tbody>
          </table>
        </div>
      </div>
    `);
  });
}

/* ================= PLACEHOLDERS (keep your existing ones if you already have them) ================= */
/* If these already exist in your full file, you can delete these stubs. */
function renderTable(){ /* your existing implementation */ }
function computeLineup(){ /* your existing implementation */ }
function computeRankedTeamStacks(){ /* your existing implementation */ }

/* ================= EVENTS ================= */
el.homeBtn.addEventListener("click", goHome);

document.addEventListener("click", (e) => {
  const btn = e.target.closest("button[data-lg][data-md]");
  if (!btn) return;
  const md = btn.getAttribute("data-md");
  loadLeague("nhl", md);
});

el.playerSearch.addEventListener("input", renderTable);

/* ================= START ================= */
goHome();
</script>

<style>
/* Blur the whole app while transitioning */
.is-transitioning #app{
  filter: blur(12px) saturate(1.15);
  transform: translateZ(0);
}

/* Blur-only overlay */
.transition-overlay{
  position: fixed;
  inset: 0;
  z-index: 9999;
  pointer-events: none;
  opacity: 0;
  backdrop-filter: blur(16px);
  -webkit-backdrop-filter: blur(16px);
  transition: opacity .18s ease;
}
.transition-overlay.out{
  opacity: 0;
  transition: opacity .22s ease;
}

/* We keep a very subtle dark veil (no color shifting) */
.transition-overlay::before{
  content:"";
  position:absolute;
  inset:0;
  background: rgba(2,6,23,.35);
}

/* Make it visible during transition */
.is-transitioning #transitionOverlay{
  opacity: 1;
}

/* Buttons */
.btn{
  padding:.55rem 1rem;border-radius:.6rem;
  background: rgba(255,255,255,.06);
  border: 1px solid rgba(255,255,255,.10);
  backdrop-filter: blur(10px);-webkit-backdrop-filter: blur(10px);
  transition: transform .18s ease, box-shadow .18s ease, background .18s ease;
}
.btn:hover{ transform: translateY(-2px); box-shadow: 0 16px 40px rgba(0,0,0,.55); background: rgba(255,255,255,.08); }
.btn:active{ transform: translateY(0); }
.btn-soft{ background: rgba(255,255,255,.05); }

.glass-card{
  border-radius: 1rem;
  border: 1px solid rgba(255,255,255,.10);
  background: rgba(2,6,23,.35);
  box-shadow: 0 18px 55px rgba(0,0,0,.55);
  backdrop-filter: blur(14px);-webkit-backdrop-filter: blur(14px);
}

.nav-btn{
  display:flex;align-items:center;gap:.75rem;
  padding:.85rem .9rem;border-radius:.9rem;
  border: 1px solid rgba(255,255,255,.10);
  background: rgba(255,255,255,.05);
  transition: transform .18s ease, box-shadow .18s ease, background .18s ease;
}
.nav-btn:hover{ transform: translateY(-2px); background: rgba(255,255,255,.08); box-shadow: 0 16px 38px rgba(0,0,0,.55); }
.nav-icon{
  width: 38px;height: 38px;display:grid;place-items:center;
  border-radius: .85rem;background: rgba(255,255,255,.06);
  border: 1px solid rgba(255,255,255,.10);
}
.nav-arrow{ opacity:.75; transition: transform .18s ease, opacity .18s ease; }
.nav-btn:hover .nav-arrow{ transform: translateX(3px); opacity: 1; }

/* Main menu tiles (big 2x2) */
.nav-main-tile{
  min-height: 220px;
  padding: 1.1rem 1.1rem;
  align-items: flex-start;
}
@media (min-width: 640px){
  .nav-main-tile{ min-height: 260px; }
}
@media (min-width: 900px){
  .nav-main-tile{ min-height: 300px; }
}

.table-wrap{ border-radius: 1rem; overflow: hidden; border: 1px solid rgba(255,255,255,.10); }
.hover-row{ transition: transform .14s ease, background .14s ease; }
.hover-row:hover{ transform: translateX(2px); background: rgba(255,255,255,.06); }

.fade-in{ animation: fadeInUp .28s ease both; }
@keyframes fadeInUp{ from{opacity:0;transform: translateY(10px);} to{opacity:1;transform: translateY(0);} }

.spinner{
  width: 36px;height: 36px;border-radius: 999px;
  border: 3px solid rgba(255,255,255,.18);
  border-top-color: rgba(34,211,238,.65);
  animation: spin 1s linear infinite;
}
@keyframes spin{ to{ transform: rotate(360deg); } }

.aurora-bg{
  position: fixed; inset: -30%; z-index: 0;
  background:
    radial-gradient(circle at 12% 22%, rgba(16,185,129,.42), transparent 58%),
    radial-gradient(circle at 86% 28%, rgba(34,211,238,.40), transparent 58%),
    radial-gradient(circle at 50% 86%, rgba(16,185,129,.34), transparent 62%),
    radial-gradient(circle at 28% 72%, rgba(34,211,238,.28), transparent 62%),
    radial-gradient(circle at 70% 68%, rgba(16,185,129,.24), transparent 64%);
  filter: blur(22px) saturate(1.35);
  animation: auroraMove 12s ease-in-out infinite;
}
.aurora-noise{
  position: fixed; inset: 0; z-index: 1;
  pointer-events: none; opacity: .08;
  background-image:
    url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='320' height='320'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='.8' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='320' height='320' filter='url(%23n)' opacity='.6'/%3E%3C/svg%3E");
  mix-blend-mode: overlay;
}

@keyframes auroraMove{
  0%{ transform: translate3d(-2%, -1%, 0) scale(1.02); }
  50%{ transform: translate3d(2%, 1%, 0) scale(1.05); }
  100%{ transform: translate3d(-2%, -1%, 0) scale(1.02); }
}

.team-card{
  border-radius: 1rem;
  border: 1px solid rgba(255,255,255,.10);
  background: rgba(255,255,255,.04);
  padding: 1rem;
  box-shadow: 0 18px 55px rgba(0,0,0,.45);
  backdrop-filter: blur(14px);
  -webkit-backdrop-filter: blur(14px);
}
.rank-badge{
  padding: .35rem .65rem;
  border-radius: 999px;
  border: 1px solid rgba(255,255,255,.10);
  background: rgba(255,255,255,.06);
  font-weight: 700;
  font-size: .85rem;
  letter-spacing: .02em;
}
.chips{
  display:flex;
  flex-wrap: wrap;
  gap: .5rem;
}
.chip{
  display:flex;
  align-items:center;
  gap:.5rem;
  padding: .35rem .55rem;
  border-radius: 999px;
  border: 1px solid rgba(255,255,255,.10);
  background: rgba(2,6,23,.35);
}
.chip-name{
  font-weight: 650;
  font-size: .85rem;
}

.brand-badge{
  display:flex;align-items:center;gap:.5rem;
  padding:.4rem .7rem;border-radius: 999px;
  border: 1px solid rgba(255,255,255,.10);
  background: rgba(255,255,255,.05);
  backdrop-filter: blur(12px);
}
.brand-dot{
  width:10px;height:10px;border-radius:999px;
  background: linear-gradient(90deg, rgba(16,185,129,1), rgba(34,211,238,1));
  box-shadow: 0 0 18px rgba(34,211,238,.25);
  animation: pulseDot 2.2s ease-in-out infinite;
}
@keyframes pulseDot{
  0%,100%{ transform: scale(1); opacity: .9; }
  50%{ transform: scale(1.18); opacity: 1; }
}
</style>

</body>
</html>
